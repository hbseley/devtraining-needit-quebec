<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="Update Address">b7bfb70f2fa130106daee36ef699b611</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"87a8a6df458c499dafbde45fcfb9980c","triggerType":"request","applicability":{"type":"Applicability","mode":"script","value":"true"},"id":"87a8a6df458c499dafbde45fcfb9980c"}],"goals":[{"name":"primary","trigger_id":"87a8a6df458c499dafbde45fcfb9980c","nodes":[{"type":"StartGoal","goal_id":"primary","greeting_msg":{"type":"String","mode":"string","value":""},"id":"44c5295263004a919ec7dd5009bfb07a","name":"Start"},{"type":"TerminateGoal","goal_id":"primary","confirmation_msg":{"type":"String","mode":"string","value":""},"id":"9dac62c62450449683f4a52953cc8c84","name":"End"},{"type":"CRUDAction","mode":"read","read_mode":"variable","query":"user={{vaInputs.user}}","variable_id":"f87aa4a55766415799ac34574b84ddae","id":"013ad87782b54f399cba5d16fdb9e4bb","name":"User profile","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"glide_query","value":"user={{vaInputs.user}}"}},{"type":"ScriptOutputPrompt","output_type":"single_part","id":"f482973ce9b346f8b2dea8eacaba6ac7","name":"Get current address","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"value":{"type":"String","mode":"string","value":"(function execute() {\n    var profileGr = new GlideRecord('sn_hr_core_profile');\n     profileGr.addQuery('sys_id', vaInputs.user_profile);\n     profileGr.query();\n     vaVars.currentAddressMessage=\"\";\n     if(profileGr.next()){\n        vaVars.currentAddress = profileGr.getDisplayValue('address');\n        if(vaVars.currentAddress!=\"\")\n        vaVars.currentAddressMessage = gs.getMessage(\"This is the address we have on file for you: \");\n     }\n     else\n     vaVars.currentAddressMessage = \"\";\n})()\n"},"secure":false},{"type":"HtmlOutputPrompt","height":0,"width":0,"id":"d54a926bf7fa402fbae0db6de2311f30","name":"Display current address message","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"(function execute() {\n    if(vaVars.currentAddressMessage!=\"\")\n    return true;\n    return false;\n})()\n"},"value":{"type":"String","mode":"string","value":"&lt;html&gt;\n    &lt;body&gt;\n    {{vaVars.currentAddressMessage}}\n    &lt;/body&gt;\n&lt;/html&gt;\n"},"secure":false},{"type":"InputPrompt","variable_id":"01c1418ea76147be831d36c6db0dc58d","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"What should your address be instead (max. 255 characters)?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"1eaf0794da0b4945a61acb9eae3b18da","name":"New Address","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""},{"type":"CRUDAction","mode":"update","query":"address={{vaInputs.new_address}}","variable_id":"f87aa4a55766415799ac34574b84ddae","id":"2ca38f60fc154d388ae32486d447ead4","name":"Update address","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptOutputPrompt","output_type":"single_part","id":"d6850017207f441ca129d6826cf71ebb","name":"Address length check","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"value":{"type":"String","mode":"string","value":"(function execute() {\n    \n    if(vaInputs.new_address.getValue()){\n        vaVars.addressLength = vaInputs.new_address.getValue().length;\n        gs.info(\"vaVars.addressLength\"+vaVars.addressLength);\n        if(vaVars.addressLength &gt; 255 || vaVars.addressLength == 0)\n            vaVars.isAddressBigOrNull = true; \n        else\n            vaVars.isAddressBigOrNull = false;\n    }\n    else\n    vaVars.isAddressBigOrNull = true;\n    return '';\n})()\n"},"secure":false},{"type":"Decision","name":"Is Address too long or null?","branches":[{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    return vaVars.isAddressBigOrNull;\n})()\n"},"id":"c8cd1a7cf7114056b3bc733bac29733d","name":"Yes"},{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    return !vaVars.isAddressBigOrNull;\n})()\n"},"id":"6d0e603bfe304034abfe77c00c46ec4e","name":"No"}],"id":"afd4ec6d85624a4e8fc8c1fa23050d8b","goal_id":"primary"},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"ea9a52f355f94b85a233bc4efc5675e0","name":"User choice","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"48d5863a97dc4aab92e1068d77d0361f","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"What would you like to do?\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"Decision","name":"Update address required?","branches":[{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"user_choice=update_address"},"id":"5414258baef846b08c0c9b658de6ab36","name":"Yes"},{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"user_choice=keep_current_address"},"id":"7f5f2ca80fc442dea6e18c40ec9be602","name":"No"}],"id":"0c37eebe3870432b9b43dcc1adc363f4","goal_id":"primary"},{"type":"Decision","name":"Decision","branches":[{"type":"Branch","label":"Profile Found","expression":{"type":"Applicability","mode":"query","value":"user_profileISNOTEMPTY"},"id":"6ed79dc242fe48bf8242a52f988dd570","name":"Profile Found"},{"type":"Branch","label":"Profile Not Found","expression":{"type":"Applicability","mode":"query","value":"user_profileISEMPTY"},"id":"c5eded6808354db7bfd2b043cc450f8a","name":"Profile Not Found"}],"id":"72587d357885460ba54442e9601dcd3a","goal_id":"primary"},{"type":"OutputPrompt","value":{"type":"String","mode":"string","value":"gs.getMessageLang(\"I did not find your profile information.\", vaContext.getRequesterLang())"},"id":"f85d819141ae45caa9b084077ddeb486","name":"User profile not found","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"Decision","name":"Decision","branches":[{"type":"Branch","label":"Address Found","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n   return (vaVars.currentAddress != \"\");\n})()\n"},"id":"b6eb922db59f499285248626fd4cdcbc","name":"Address Found"},{"type":"Branch","label":"Address Not found","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    return (vaVars.currentAddress == \"\");\n})()\n"},"id":"741dc35166c94519a6e16f0b96387dc9","name":"Address Not found"}],"id":"0e2d7ca56cd246f49f6b4d148e232715","goal_id":"primary"},{"type":"RecordOutputPrompt","mode":"query","table":"sn_hr_core_profile","fields":["address"],"id":"1ba0510deb0d40f489da5ff023feb353","name":"Display current address ","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"reference_qualifier_condition":"sys_id={{vaInputs.user_profile.sys_id}}","condition":{"type":"Condition","mode":"glide_query","value":"sys_id={{vaInputs.user_profile.sys_id}}"}},{"type":"CRUDAction","mode":"read","read_mode":"variable","query":"payroll_country=United States","variable_id":"cd56e391e6fa43029e44bcb0f31c57c2","id":"3c8910413653482e90f0fad6c59ae04c","name":"Update Tax Forms","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"glide_query","value":"payroll_country=United States"}},{"type":"LinkOutputPrompt","header":{"type":"String","mode":"string","value":"{{vaInputs.update_tax_forms}}{{vaInputs.update_tax_forms.payroll_country}}"},"label":{"type":"String","mode":"string","value":""},"url":{"type":"String","mode":"string","value":""},"link_type":"multiple","multi_link_script":"(function execute(updateAddress) {\n    \n       var groupedLinksOutMsg = new sn_cs.GroupedPartsOutMsg();\n       groupedLinksOutMsg.setHeader(updateAddress);\n       groupedLinksOutMsg.addLinkPart('Sample I-9 Form', 'https://www.uscis.gov/sites/default/files/document/forms/i-9.pdf', 'You will have to update section 1 of your I-9 Form', 'HRSD');\n       groupedLinksOutMsg.addLinkPart('I-9 Form Instructions', 'https://www.uscis.gov/sites/default/files/document/forms/i-9instr.pdf', 'Here are instructions on how to complete the I-9 Form', 'KB');\n       return groupedLinksOutMsg;\n   \n})(updateAddress)\n","id":"259e52f152f04f36820cbb56ffb6a102","name":"Tax Form Info","goal_id":"primary","applicability":{"type":"Applicability","mode":"query","value":"tax_form_update=yes"}},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n    return gs.getMessage(\"I've updated your address to {0}\",vaInputs.new_address);\n})()\n"},"id":"c52a213fc6fb41c383175daa7fc928f7","name":"Display confirmation message","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"a8acbe446c4c4bff9bf0d3ccd943bfda","name":"Tax Form Update","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"88d67d164f31455aaf72326a062052f8","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Would you like to update your tax forms?\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}}],"edges":[{"type":"Edge","source_node_id":"3c8910413653482e90f0fad6c59ae04c","target_node_id":"a8acbe446c4c4bff9bf0d3ccd943bfda","id":"33af2491c6524b688e942579326f6422"},{"type":"Edge","source_node_id":"259e52f152f04f36820cbb56ffb6a102","target_node_id":"9dac62c62450449683f4a52953cc8c84","id":"cd36fbb8cb2d4b6db936622a5374ea8f"},{"type":"Edge","source_node_id":"afd4ec6d85624a4e8fc8c1fa23050d8b","target_node_id":"1eaf0794da0b4945a61acb9eae3b18da","branch_id":"c8cd1a7cf7114056b3bc733bac29733d","id":"de30fc5499a04029b722b495059901e4","name":"c8cd1a7cf7114056b3bc733bac29733d"},{"type":"Edge","source_node_id":"44c5295263004a919ec7dd5009bfb07a","target_node_id":"013ad87782b54f399cba5d16fdb9e4bb","id":"c9f3ddf6766f456885384ea1eb784877"},{"type":"Edge","source_node_id":"1eaf0794da0b4945a61acb9eae3b18da","target_node_id":"d6850017207f441ca129d6826cf71ebb","id":"0e9aff6cdc2e4a5480c8e6863740bdbd"},{"type":"Edge","source_node_id":"d6850017207f441ca129d6826cf71ebb","target_node_id":"afd4ec6d85624a4e8fc8c1fa23050d8b","id":"e90c66cfb05b43ec8a4dd62fe40477c3"},{"type":"Edge","source_node_id":"afd4ec6d85624a4e8fc8c1fa23050d8b","target_node_id":"2ca38f60fc154d388ae32486d447ead4","branch_id":"6d0e603bfe304034abfe77c00c46ec4e","id":"6102cee156bc4ab198dbcae5cac16971","name":"6d0e603bfe304034abfe77c00c46ec4e"},{"type":"Edge","source_node_id":"ea9a52f355f94b85a233bc4efc5675e0","target_node_id":"0c37eebe3870432b9b43dcc1adc363f4","id":"979e105ffc344bb48a7d0de963f7400e"},{"type":"Edge","source_node_id":"0c37eebe3870432b9b43dcc1adc363f4","target_node_id":"1eaf0794da0b4945a61acb9eae3b18da","branch_id":"5414258baef846b08c0c9b658de6ab36","id":"94de5ae84a1a44c39f2055126f9dab47","name":"5414258baef846b08c0c9b658de6ab36"},{"type":"Edge","source_node_id":"0c37eebe3870432b9b43dcc1adc363f4","target_node_id":"9dac62c62450449683f4a52953cc8c84","branch_id":"7f5f2ca80fc442dea6e18c40ec9be602","id":"68959424597d4ce0b231d819016adc01","name":"7f5f2ca80fc442dea6e18c40ec9be602"},{"type":"Edge","source_node_id":"013ad87782b54f399cba5d16fdb9e4bb","target_node_id":"72587d357885460ba54442e9601dcd3a","id":"7cb7afca252e44928ea33617f94e514b"},{"type":"Edge","source_node_id":"72587d357885460ba54442e9601dcd3a","target_node_id":"f482973ce9b346f8b2dea8eacaba6ac7","branch_id":"6ed79dc242fe48bf8242a52f988dd570","id":"2f0991b7858440429abfbade6512257d","name":"6ed79dc242fe48bf8242a52f988dd570"},{"type":"Edge","source_node_id":"72587d357885460ba54442e9601dcd3a","target_node_id":"f85d819141ae45caa9b084077ddeb486","branch_id":"c5eded6808354db7bfd2b043cc450f8a","id":"06ba521a1a8d419e92f37b5169cd9d7a","name":"c5eded6808354db7bfd2b043cc450f8a"},{"type":"Edge","source_node_id":"f85d819141ae45caa9b084077ddeb486","target_node_id":"9dac62c62450449683f4a52953cc8c84","id":"4a6719fa4a164fb0b5aea36dfffc6e69"},{"type":"Edge","source_node_id":"f482973ce9b346f8b2dea8eacaba6ac7","target_node_id":"0e2d7ca56cd246f49f6b4d148e232715","id":"ac6f77f6312d4e1da614ec7662998679"},{"type":"Edge","source_node_id":"0e2d7ca56cd246f49f6b4d148e232715","target_node_id":"d54a926bf7fa402fbae0db6de2311f30","branch_id":"b6eb922db59f499285248626fd4cdcbc","id":"cc5a43abc1c543708d88c793de98a2bd","name":"b6eb922db59f499285248626fd4cdcbc"},{"type":"Edge","source_node_id":"0e2d7ca56cd246f49f6b4d148e232715","target_node_id":"1eaf0794da0b4945a61acb9eae3b18da","branch_id":"741dc35166c94519a6e16f0b96387dc9","id":"5b4556e86fc14294beeb960334a57100","name":"741dc35166c94519a6e16f0b96387dc9"},{"type":"Edge","source_node_id":"d54a926bf7fa402fbae0db6de2311f30","target_node_id":"1ba0510deb0d40f489da5ff023feb353","id":"067d38aec62941319e06982281864ab6"},{"type":"Edge","source_node_id":"1ba0510deb0d40f489da5ff023feb353","target_node_id":"ea9a52f355f94b85a233bc4efc5675e0","id":"c8ab33de66104f14889d83bcb9a1ad9a"},{"type":"Edge","source_node_id":"2ca38f60fc154d388ae32486d447ead4","target_node_id":"c52a213fc6fb41c383175daa7fc928f7","id":"413eb76c44754a05a059a1e1b1eaad73"},{"type":"Edge","source_node_id":"c52a213fc6fb41c383175daa7fc928f7","target_node_id":"3c8910413653482e90f0fad6c59ae04c","id":"b454cbdd69994ee29392aef27686dcbd"},{"type":"Edge","source_node_id":"a8acbe446c4c4bff9bf0d3ccd943bfda","target_node_id":"259e52f152f04f36820cbb56ffb6a102","id":"455a5c5181f347948c7fe851e3f7ace3"}],"id":"primary"}],"script_variables":[{"type":"String","name":"LiveAgent_application","value":{"type":"String","mode":"string"},"id":"d2ba17b510e640e7869d744c76124ce6","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"LiveAgent_queue","value":{"type":"String","mode":"string"},"id":"f23998b25ca94364991f88a018c77398","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"LiveAgent_hr_topic_id","value":{"type":"String","mode":"string","value":"b080796c5388330088d9ddeeff7b12af"},"id":"59dc5ea800074315b46adcee1d802a4b","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"currentAddressMessage","value":{"type":"String","mode":"string"},"id":"6a03090419fb4af4bab98287efb19a7d","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"isAddressBigOrNull","value":{"type":"String","mode":"string","value":"false"},"id":"24b316574fe94efdb48d08c8eaf5624b","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"addressLength","value":{"type":"String","mode":"string"},"id":"8dada3cad2ae4d13a7de111fd1d89204","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"currentAddress","value":{"type":"String","mode":"string"},"id":"c4014864026147f1aea023146720bb2c","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"newState","value":{"type":"String","mode":"string"},"id":"f8bf511ac01c40698a370638f6fd42fa","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"oldState","value":{"type":"String","mode":"string"},"id":"f3dccbf590d943e68d831c879351d222","formatType":"text","secure":false,"sensitive":false}],"glide_variables":[{"type":"Reference","table":"sn_hr_core_profile","id":"f87aa4a55766415799ac34574b84ddae","name":"user_profile","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"new_address","id":"01c1418ea76147be831d36c6db0dc58d","formatType":"Text","validationScript":"","secure":false,"sensitive":false},{"type":"Reference","table":"sn_hr_core_profile","id":"c8a95d3c1685408aa954f696d5acbb7d","name":"update_address","formatType":"text","secure":false,"sensitive":false},{"type":"Choice","choices":[{"name":"Update address","element":"update_address"},{"name":"Keep current address","element":"keep_current_address"}],"id":"48d5863a97dc4aab92e1068d77d0361f","name":"user_choice","formatType":"text","secure":false,"sensitive":false},{"type":"Reference","table":"sys_user","id":"f5e1950fef9d4c7cb119c10a9de1433a","name":"user","formatType":"text","secure":false,"sensitive":false},{"type":"Reference","table":"sn_hr_ef_employee_document","id":"cd56e391e6fa43029e44bcb0f31c57c2","name":"update_tax_forms","formatType":"text","secure":false,"sensitive":false},{"type":"Choice","choices":[{"name":"Yes","element":"yes"},{"name":"No","element":"no"}],"id":"88d67d164f31455aaf72326a062052f8","name":"tax_form_update","formatType":"text","secure":false,"sensitive":false}],"applicability":{"type":"Applicability","mode":"script","value":"true"},"roles":["sn_hr_sp.hrsp_alumni","sn_hr_sp.hrsp_contingent","sn_hr_sp.hrsp_contractor","sn_hr_sp.hrsp_employee","sn_hr_sp.admin"],"scope":"6ead8e780f603200cd674f8ce1050ed1","domain":"global","topic_type":"STANDARD","channels":[],"id":"99083f832fa130106daee36ef699b6af","name":"_PRVW__f3bfb70fb1a1301058aa0aa687c23310","key_phrases":["Update Address","Update Address (Template)","Update","Address","Personal","Information","Current Address"],"nlu_provider":"","nlu_model":"","nlu_model_label":"","nlu_intent":"","nlu_intent_label":"","flexible_conversation_switching":false,"design_categories":[{"name":null,"visible":false,"sysId":"ccde424173f0330018dd3ae234f6a7bf"}],"triggerable_by_notification":false,"auto_resolution_enabled":false,"library":false,"nluMapping":"[]"}</design_definition>
        <design_topic_id>99083f832fa130106daee36ef699b6af</design_topic_id>
        <name>_PRVW__f3bfb70fb1a1301058aa0aa687c23310</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-07-29 15:25:15</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>3bbfb70f2fa130106daee36ef699b614</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt" source="x_58872_needit">6ead8e780f603200cd674f8ce1050ed1</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt">6ead8e780f603200cd674f8ce1050ed1</sys_scope>
        <sys_update_name>sys_cb_design_topic_3bbfb70f2fa130106daee36ef699b614</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-07-29 15:25:15</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
